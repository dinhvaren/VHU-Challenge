  <div class="glitch">
    <div class="glitch__img"></div>
  </div>

  <!-- Navbar -->
  <div class="navbar-dark text-white">
    <div class="container">
      <nav class="navbar px-0 navbar-expand-lg navbar-dark">
        <a href="index.html" class="navbar-brand">
          <h3><span class="color_danger">VHU</span><span class="color_white">Admin</span></h3>
        </a>
        <div class="navbar-nav ml-auto">
          <a href="admin.html" class="p-3 text-decoration-none text-light bold">Dashboard</a>
          <a href="login.html" class="p-3 text-decoration-none text-danger bold">Logout</a>
        </div>
      </nav>
    </div>
  </div>

  <!-- Main -->
  <div class="jumbotron bg-transparent mb-0 pt-3 radius-0">
    <div class="container">
      <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3">
          <h4 class="bold color_white mb-4">Admin Panel</h4>
          <div class="list-group">
            <a href="admin.html" class="list-group-item list-group-item-action">Dashboard</a>
            <a href="users.html" class="list-group-item list-group-item-action">Users</a>
            <a href="teams.html" class="list-group-item list-group-item-action active">Teams</a>
            <a href="challenges.html" class="list-group-item list-group-item-action">Challenges</a>
            <a href="leaderboard.html" class="list-group-item list-group-item-action">Leaderboard</a>
          </div>
        </div>

        <!-- Main Content -->
        <div class="col-md-9">
          <h2 class="bold color_white mb-4">Manage Teams</h2>

          <table class="table table-hover table-striped text-light" id="teamTable">
            <thead class="thead-dark">
              <tr>
                <th>ID</th>
                <th>Team Name</th>
                <th>Members</th>
                <th>Score</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody class="hackerFont">
              <tr>
                <td>1</td>
                <td>CyberVHU</td>
                <td>4</td>
                <td>1200</td>
                <td><span class="badge badge-success">Active</span></td>
                <td>
                  <button class="btn btn-sm btn-outline-primary mr-1 editBtn"><i class="fas fa-edit"></i></button>
                  <button class="btn btn-sm btn-outline-danger deleteBtn"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td>2</td>
                <td>Rooted</td>
                <td>3</td>
                <td>950</td>
                <td><span class="badge badge-warning">Pending</span></td>
                <td>
                  <button class="btn btn-sm btn-outline-primary mr-1 editBtn"><i class="fas fa-edit"></i></button>
                  <button class="btn btn-sm btn-outline-danger deleteBtn"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>

          <button class="btn btn-outline-danger btn-shadow px-3 my-3" data-toggle="modal" data-target="#addTeamModal">
            <i class="fas fa-plus mr-2"></i>Add New Team
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- üü¢ Add Team Modal -->
  <div class="modal fade" id="addTeamModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content bg-dark text-light border border-danger">
        <div class="modal-header border-danger">
          <h5 class="modal-title color_danger bold">‚ûï Add New Team</h5>
          <button type="button" class="close text-light" data-dismiss="modal"><span>&times;</span></button>
        </div>
        <div class="modal-body hackerFont">
          <form id="addTeamForm">
            <div class="form-group">
              <label>Team ID</label>
              <input type="text" class="form-control bg-transparent text-light" id="addTeamID" placeholder="e.g., T001" required>
            </div>
            <div class="form-group">
              <label>Team Name</label>
              <input type="text" class="form-control bg-transparent text-light" id="addTeamName" required>
            </div>
            <div class="form-group">
              <label>Members</label>
              <input type="number" class="form-control bg-transparent text-light" id="addMembers" required>
            </div>
            <div class="form-group">
              <label>Score</label>
              <input type="number" class="form-control bg-transparent text-light" id="addScore" value="0">
            </div>
            <div class="form-group">
              <label>Status</label>
              <select class="form-control bg-transparent text-light" id="addStatus">
                <option>Active</option>
                <option>Pending</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer border-danger">
          <button class="btn btn-outline-light" data-dismiss="modal">Cancel</button>
          <button class="btn btn-outline-danger" id="saveAdd">Add Team</button>
        </div>
      </div>
    </div>
  </div>

  <!-- üü° Edit Team Modal -->
  <div class="modal fade" id="editTeamModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-dark text-light border border-warning">
        <div class="modal-header border-warning">
          <h5 class="modal-title color_danger bold">‚úèÔ∏è Edit Team</h5>
          <button type="button" class="close text-light" data-dismiss="modal"><span>&times;</span></button>
        </div>
        <div class="modal-body hackerFont">
          <form id="editTeamForm">
            <input type="hidden" id="editRowIndex">
            <div class="form-group">
              <label>Team ID</label>
              <input type="text" class="form-control bg-transparent text-light" id="editTeamID" readonly>
            </div>
            <div class="form-group">
              <label>Team Name</label>
              <input type="text" class="form-control bg-transparent text-light" id="editTeamName" required>
            </div>
            <div class="form-group">
              <label>Members</label>
              <input type="number" class="form-control bg-transparent text-light" id="editMembers" required>
            </div>
            <div class="form-group">
              <label>Score</label>
              <input type="number" class="form-control bg-transparent text-light" id="editScore" required>
            </div>
            <div class="form-group">
              <label>Status</label>
              <select class="form-control bg-transparent text-light" id="editStatus">
                <option>Active</option>
                <option>Pending</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer border-warning">
          <button class="btn btn-outline-light" data-dismiss="modal">Cancel</button>
          <button class="btn btn-outline-warning" id="saveEdit">Save Changes</button>
        </div>
      </div>
    </div>
  </div>

  <!-- üî¥ Delete Confirmation Modal -->
  <div class="modal fade" id="deleteTeamModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-dark text-light border border-danger">
        <div class="modal-header border-danger">
          <h5 class="modal-title color_danger bold">‚ö†Ô∏è Confirm Deletion</h5>
          <button type="button" class="close text-light" data-dismiss="modal"><span>&times;</span></button>
        </div>
        <div class="modal-body hackerFont">
          Are you sure you want to delete this team? This action cannot be undone.
        </div>
        <div class="modal-footer border-danger">
          <button class="btn btn-outline-light" data-dismiss="modal">Cancel</button>
          <button class="btn btn-outline-danger" id="confirmDelete">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <!-- Logic -->
  <script>
    const table = document.getElementById("teamTable").getElementsByTagName("tbody")[0];
    let deleteRow = null;

    // Add Team
    $("#saveAdd").on("click", function () {
      const id = $("#addTeamID").val();
      const name = $("#addTeamName").val();
      const members = $("#addMembers").val();
      const score = $("#addScore").val();
      const status = $("#addStatus").val();

      if (!id || !name) return alert("Please fill in all required fields.");

      const row = table.insertRow();
      row.innerHTML = `
        <td>${id}</td>
        <td>${name}</td>
        <td>${members}</td>
        <td>${score}</td>
        <td><span class="badge badge-${status === 'Active' ? 'success' : 'warning'}">${status}</span></td>
        <td>
          <button class="btn btn-sm btn-outline-primary mr-1 editBtn"><i class="fas fa-edit"></i></button>
          <button class="btn btn-sm btn-outline-danger deleteBtn"><i class="fas fa-trash"></i></button>
        </td>`;
      $("#addTeamModal").modal("hide");
      $("#addTeamForm")[0].reset();
    });

    // Edit Team
    $(document).on("click", ".editBtn", function () {
      const row = $(this).closest("tr")[0];
      $("#editRowIndex").val(row.rowIndex - 1);
      $("#editTeamID").val(row.cells[0].innerText);
      $("#editTeamName").val(row.cells[1].innerText);
      $("#editMembers").val(row.cells[2].innerText);
      $("#editScore").val(row.cells[3].innerText);
      $("#editStatus").val(row.cells[4].innerText.trim());
      $("#editTeamModal").modal("show");
    });

    $("#saveEdit").on("click", function () {
      const idx = $("#editRowIndex").val();
      const row = table.rows[idx];
      row.cells[1].innerText = $("#editTeamName").val();
      row.cells[2].innerText = $("#editMembers").val();
      row.cells[3].innerText = $("#editScore").val();
      const status = $("#editStatus").val();
      row.cells[4].innerHTML = `<span class="badge badge-${status === 'Active' ? 'success' : 'warning'}">${status}</span>`;
      $("#editTeamModal").modal("hide");
    });

    // Delete Team
    $(document).on("click", ".deleteBtn", function () {
      deleteRow = $(this).closest("tr")[0];
      $("#deleteTeamModal").modal("show");
    });

    $("#confirmDelete").on("click", function () {
      if (deleteRow) {
        deleteRow.remove();
        deleteRow = null;
      }
      $("#deleteTeamModal").modal("hide");
    });
  </script>
